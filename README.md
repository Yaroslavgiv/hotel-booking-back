# Hotel Booking GraphQL API

–°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π —Å GraphQL API –Ω–∞ Node.js + Apollo Server + TypeScript.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –° Docker (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
git clone https://github.com/Yaroslavgiv/hotel-booking-back.git
cd hotel-booking-back
docker compose up --build
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞: **http://localhost:4001/graphql**

### –ë–µ–∑ Docker (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
git clone https://github.com/Yaroslavgiv/hotel-booking-back.git
cd hotel-booking-back
npm install
npm run dev
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞: **http://localhost:4001/graphql**

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [Docker Desktop](https://www.docker.com/products/docker-desktop/). –ï—Å–ª–∏ Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫.

### üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ **[GRAPHQL_QUERIES.md](./GRAPHQL_QUERIES.md)**

–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
```graphql
query {
  hotels {
    id
    name
  }
}
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** + **TypeScript**
- **Apollo Server v4** (GraphQL)
- **TypeORM** (ORM)
- **SQLite** (better-sqlite3) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Winston** (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **Express** (HTTP —Å–µ—Ä–≤–µ—Ä)
- **Jest** (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **Docker** + **Docker Compose** (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

- **Repository Pattern** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Service Layer** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Dependency Injection** - —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- **Error Handling** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫
- **Logging** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ models/          # TypeORM –º–æ–¥–µ–ª–∏ (Hotel, Room, Booking)
‚îú‚îÄ‚îÄ repositories/    # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ resolvers/       # GraphQL —Ä–µ–∑–æ–ª–≤–µ—Ä—ã
‚îú‚îÄ‚îÄ schema/          # GraphQL —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ database/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –∏ seed
‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã (logger, errors, validators)
‚îî‚îÄ‚îÄ __tests__/       # –¢–µ—Å—Ç—ã (Jest)
    ‚îú‚îÄ‚îÄ resolvers/   # –¢–µ—Å—Ç—ã —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤
    ‚îú‚îÄ‚îÄ services/    # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îî‚îÄ‚îÄ utils/       # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

## –ó–∞–ø—É—Å–∫

### Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose:

```bash
docker compose up --build
```

**–ü–æ—Ä—Ç—ã –∏ URL:**
- **Backend API:** `http://localhost:4001/graphql`
- **GraphQL Endpoint:** `http://localhost:4001/graphql`

**–î–æ—Å—Ç—É–ø –∫ GraphQL API:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:4001/graphql`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π GraphQL –∫–ª–∏–µ–Ω—Ç (Postman, Insomnia, GraphQL Playground)
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å curl –∏–ª–∏ –ª—é–±–æ–π HTTP –∫–ª–∏–µ–Ω—Ç

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST http://localhost:4001/graphql \
  -H "Content-Type: application/json" \
  -d '{"query":"{ hotels { id name } }"}'
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
docker compose down
```

**–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (—É–¥–∞–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö):**
```bash
docker compose down -v
rm -rf data/
```

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./data/` –Ω–∞ —Ö–æ—Å—Ç–µ –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm install
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:4001/graphql` (–ø–æ—Ä—Ç –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `PORT`).

#### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
npm install
npm run build
npm start
```

### Seed –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (`npm run dev`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:
- **2 –æ—Ç–µ–ª—è:**
  - "–ì—Ä–∞–Ω–¥ –û—Ç–µ–ª—å" (–ú–æ—Å–∫–≤–∞) - 4 –Ω–æ–º–µ—Ä–∞ (2 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞, 2 –ª—é–∫—Å–∞)
  - "–ú–æ—Ä—Å–∫–æ–π –ë—Ä–∏–∑" (–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥) - 3 –Ω–æ–º–µ—Ä–∞ (2 —ç–∫–æ–Ω–æ–º, 1 –ø—Ä–µ–º–∏—É–º)
- **5 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π** (–≤—Å–µ –¥–ª—è –æ—Ç–µ–ª—è "–ì—Ä–∞–Ω–¥ –û—Ç–µ–ª—å"):
  - 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –Ω–æ–º–µ—Ä–µ 101
  - 1 –∞–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–æ–º–µ—Ä–µ 102
  - 1 –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–æ–º–µ—Ä–µ 201
  - 1 –∞–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–æ–º–µ—Ä–µ 202

–î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–æ—á–∏—Å—Ç–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–Ω–æ–≤–æ):

```bash
npm run seed
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Jest.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ —Ä–µ–∂–∏–º–µ watch (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
npm run test:watch

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:coverage
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç **52 —Ç–µ—Å—Ç–∞**, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ:

#### Resolvers (GraphQL)
- ‚úÖ `BookingResolver` - —Å–æ–∑–¥–∞–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- ‚úÖ `HotelResolver` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π –∏ –Ω–æ–º–µ—Ä–æ–≤

#### Services (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- ‚úÖ `BookingService` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ `HotelService` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π –∏ –Ω–æ–º–µ—Ä–æ–≤

#### Utils (–£—Ç–∏–ª–∏—Ç—ã)
- ‚úÖ `dateValidator` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –¥–∞—Ç (–ø—Ä–æ—à–ª–æ–µ, –ø–æ—Ä—è–¥–æ–∫ –¥–∞—Ç, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥)
- ‚úÖ `errors` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è GraphQL (VALIDATION_ERROR, CONFLICT_ERROR, NOT_FOUND)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –º–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–µ—Ä–≤–∏—Å—ã –º–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ —Ç–µ—Å—Ç–∞—Ö –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –≤—ã–≤–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

```typescript
// –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞—Ç
describe('validateDateRange', () => {
  it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –¥–∞—Ç–∞ –∑–∞–µ–∑–¥–∞ –≤ –ø—Ä–æ—à–ª–æ–º', () => {
    const pastDate = new Date();
    pastDate.setDate(pastDate.getDate() - 1);
    expect(() => validateDateRange(pastDate, futureDate))
      .toThrow(ValidationError);
  });
});

// –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
describe('createBooking', () => {
  it('–¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ', async () => {
    const result = await bookingService.createBooking(validInput);
    expect(result).toHaveProperty('id');
    expect(mockRepository.create).toHaveBeenCalled();
  });
});
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### Android Emulator

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ localhost —Ö–æ—Å—Ç–∞:

```
http://10.0.2.2:4001/graphql
```

### –†–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ / –î—Ä—É–≥–∏–µ —ç–º—É–ª—è—Ç–æ—Ä—ã

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:

```
http://<–≤–∞—à_IP>:4001/graphql
```

–ù–∞–ø—Ä–∏–º–µ—Ä: `http://192.168.1.100:4001/graphql`

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ—Ä—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π—Ä–≤–æ–ª–æ–º.

## GraphQL API

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ `http://localhost:4001/graphql` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –ó–∞–ø—Ä–æ—Å—ã (Queries)

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–µ–ª–∏
```graphql
query {
  hotels {
    id
    name
    address
    description
    rooms {
      id
      number
      type
      price
    }
  }
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–µ–ª—å –ø–æ ID
```graphql
query {
  hotel(id: "1") {
    id
    name
    address
    rooms {
      id
      number
      type
      price
    }
  }
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–æ–º–µ—Ä–∞
```graphql
query {
  rooms {
    id
    number
    type
    price
    hotel {
      id
      name
    }
  }
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä–∞ –ø–æ –æ—Ç–µ–ª—é
```graphql
query {
  roomsByHotel(hotelId: "1") {
    id
    number
    type
    price
  }
}
```

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞
```graphql
query {
  checkAvailability(
    roomId: "1"
    checkIn: "2024-01-15"
    checkOut: "2024-01-20"
  ) {
    available
    conflictingBookings {
      id
      guestName
      checkIn
      checkOut
    }
  }
}
```

### –ú—É—Ç–∞—Ü–∏–∏ (Mutations)

#### –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```graphql
mutation {
  createBooking(input: {
    roomId: "1"
    guestName: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
    guestEmail: "ivan@example.com"
    checkIn: "2024-01-25"
    checkOut: "2024-01-30"
  }) {
    id
    guestName
    guestEmail
    checkIn
    checkOut
    room {
      id
      number
      type
    }
    isActive
  }
}
```

#### –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```graphql
mutation {
  cancelBooking(id: "1") {
    id
    isActive
    guestName
  }
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º
- –î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 365 –¥–Ω–µ–π
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∏ –æ—Ç–µ–ª—è

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `extensions.code`:
- `VALIDATION_ERROR` - –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞—Ç—ã, –¥–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–µ–≤—ã—à–∞–µ—Ç 365 –¥–Ω–µ–π –∏ —Ç.–¥.)
- `CONFLICT_ERROR` - –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (–Ω–æ–º–µ—Ä —É–∂–µ –∑–∞–Ω—è—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã, –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–º–µ–Ω–∏—Ç—å —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- `NOT_FOUND` - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω (–æ—Ç–µ–ª—å, –Ω–æ–º–µ—Ä –∏–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

–§–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏:
```json
{
  "errors": [{
    "message": "–ù–æ–º–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã...",
    "extensions": {
      "code": "CONFLICT_ERROR"
    }
  }]
}
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Winston:
- –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏)
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã:
- `error.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
- `combined.log` - –≤—Å–µ –ª–æ–≥–∏
- –ö–æ–Ω—Å–æ–ª—å - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Å timestamp

–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `LOG_LEVEL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `info`).

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```graphql
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
query {
  checkAvailability(
    roomId: "1"
    checkIn: "2024-01-15"
    checkOut: "2024-01-20"
  ) {
    available
    conflictingBookings {
      id
      guestName
      checkIn
      checkOut
    }
  }
}

# 2. –ï—Å–ª–∏ available = true, —Å–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
mutation {
  createBooking(input: {
    roomId: "1"
    guestName: "–¢–µ—Å—Ç–æ–≤—ã–π –ì–æ—Å—Ç—å"
    guestEmail: "test@example.com"
    checkIn: "2024-01-15"
    checkOut: "2024-01-20"
  }) {
    id
    guestName
  }
}
```

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

–í seed –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è "–ì—Ä–∞–Ω–¥ –û—Ç–µ–ª—å":
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤: —Å +2 –¥–æ +5 –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤: —Å +4 –¥–æ +7 –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

–≠—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è (4-5 –¥–Ω–∏), –ø–æ—ç—Ç–æ–º—É –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–∞—Ç—ã —Å 2 –ø–æ 7 –¥–µ–Ω—å –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `CONFLICT_ERROR`.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –æ—Ç–µ–ª—è

```graphql
query {
  hotel(id: "1") {
    name
    rooms {
      id
      number
      bookings {
        id
        guestName
        checkIn
        checkOut
        isActive
      }
    }
  }
}
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```env
PORT=4001
DATABASE_PATH=./hotel_booking.db
LOG_LEVEL=info
```


